<html>
<header>
	<link href="icpbravo.css" rel="stylesheet" type="text/css" />
	<title>ICPBravo - Manual de Usuário - Exemplos do uso do applet com interface de usuário</title>
	<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
	
	<script type="text/javascript" src="../scripts/shCore.js"></script>
	<script type="text/javascript" src="../scripts/shBrushCSharp.js"></script>
	<script type="text/javascript" src="../scripts/shBrushCss.js"></script>
	<script type="text/javascript" src="../scripts/shBrushDiff.js"></script>
	<script type="text/javascript" src="../scripts/shBrushJava.js"></script>
	<script type="text/javascript" src="../scripts/shBrushJScript.js"></script>
	<script type="text/javascript" src="../scripts/shBrushPlain.js"></script>
	<script type="text/javascript" src="../scripts/shBrushXml.js"></script>
	<link type="text/css" rel="stylesheet" href="../styles/shCore.css"/>
	<link type="text/css" rel="stylesheet" href="../styles/shThemeMidnight.css"/>
	<script type="text/javascript">
		SyntaxHighlighter.config.clipboardSwf = '../scripts/clipboard.swf';
		SyntaxHighlighter.all();
	</script>
</header>
<body>
	<table width='100%'><tr>
	<td align='left'><a href='index.html'><img src='../img/LogoGrande.png' border='0'></a></td>
	<td align='right'><h1><a href='http://www.oaks.com.br'>OAK Soluções Empresariais</a></h1></td>
	</tr>
	<tr><td align='center' colspan='2'><h1>Exemplos do uso do applet com interface de usuário</h1></td></tr>
	</table>
	<p>
	No capítulo anterior abordamos o uso do applet sem a interface de usuário, porém algumas vezes podemos querer resolver problemas mais simples onde nos interessa a existência de uma interface de usuário já pronta para resolver nosso problema.
	<br>Em função disto, a API também tem um applet com interface de usuário que permite tanto a operação de assinatura em documentos oriundos do servidor como de documentos oriundos do sistema de arquivo local da estação do cliente.
	</p>
	<p>
	A seguir apresentaremos alguns exemplos do uso de applet com API ICPBravo, demonstrando as funcionalidades do lado do cliente para casos onde se faz necessária a apresentação de interface para assinatura.
	<br>obs.: Em alguns exemplos, pode ser necessária a presença de algum dispositivo criptográfico instalado.
	</p>
	<A NAME="instalandoApplet()"><!-- --></A>
	<h1>Instalação do applet na página</h1>
	<p>Para a instalação do applet utilizando a interface de usuário fornecida junto com a API na página HTML, é necessária apenas a sua inclusão na página:</p>
	<h2>Tag HTML que chama o applet</h2><p>Trata-se da chamada a tag &lt;applet ...&gt; que descreve os parâmetros iniciais para a chamada ao applet.</p>
	<pre class="brush: js; html-script: true;">&lt;applet id='ICPBravoApplet'
	width='100%'
	height='800px'
	code='br.com.oaks.ICPBravo.applet.AppletICPBravo'
	codebase='../lib'
	archive='../lib/ICPBravoAPI-X.XX.jar,../lib/commons-codec.jar,../lib/commons-httpclient.jar,../lib/commons-logging.jar,../lib/mail.jar'
	mayscript&gt;
	... parâmetros de inicialização do applet ...
&lt;/applet&gt;</pre>
	<p>
	Os parêmetros de inicialização do applet são os mesmos descritos no capítulo referente ao uso do applet sem interface, porém alguns novos parâmetros poderão ser utilizados também, que se referem basicamente a forma de apresentar a interface:
	<ul>
		<li><h3>FormaMostrarCertificados</h3>Indica a forma de apresentar a lista de certificados. 0-Em árvore, com espaço ao lado para visualização dos dados do certificado, 1-Em combobox</li>
		<li><h3>FormaMostrarArquivos</h3>Indica a forma de apresentar os arquivos.0-Em uma área dentro da mesma tela principal do applet, 1-Em uma tela separada, sendo apresentado apenas um botão para selecionar o arquivo.</li>
		<li><h3>FormaMostrarAssinaturas</h3>Indica a forma de apresentar a assinatura do documento.0-Em uma área dentro da mesma tela principal do applet, 1-Em uma tela separada, sendo apresentado apenas um botão para mostrar o conteúdo da assinatura.</li>
		<li><h3>PermiteAssinatura</h3>Indica se será habilitado o botão para assinar documentos.</li>
		<li><h3>PermiteCoassinatura</h3>Indica se será habilitado o botão para co-assinar documentos, no caso de já existir uma assinatura para o mesmo documento.</li>
		<li><h3>PermiteMesclarAssinatura</h3>Indica se será habilitado o botão para importar uma assinatura para dentro de outra assinatura existente.</li>
		<li><h3>PermiteApagarAssinatura</h3>Indica se será habilitado o botão para apagar uma assinatura armazenada no sistema de arquivos local da estação cliente.</li>
		<li><h3>PermiteCriptografia</h3>Indica se será habilitado o botão para criptografar documentos.</li>
		<li><h3>AtachaDocumentoNaAssinatura</h3>Indica se, ao assinar documentos, o conteúdo do documento será embutido na assinatura.</li>
		<li><h3>MostraApenasOsCertificadosQuePodemAssinar</h3>Indica se, ao apresentar a lista de certificados, apresenta apenas os certificados com capacidade de assinar, ou apresenta todos os certificados presente do dispositivo selecionado.</li>
		<li><h3>MostraSubjectDN</h3>Indica se, ao apresentar as informações dos certificados, será apresentada a aba que mostra as informações de SubjectDN.</li>
		<li><h3>MostraIssuerDN</h3>Indica se, ao apresentar as informações dos certificados, será apresentada a aba que mostra as informações de IssuerDN.</li>
		<li><h3>MostraSubjectAlternative</h3>Indica se, ao apresentar as informações dos certificados, será apresentada a aba que mostra as informações de SubjectAlternative.</li>
		<li><h3>MostraKeyUsage</h3>Indica se, ao apresentar as informações dos certificados, será apresentada a aba que mostra as informações de KeyUsage.</li>
		<li><h3>MostraExtendedKeyUsage</h3>Indica se, ao apresentar as informações dos certificados, será apresentada a aba que mostra as informações de ExtendedKeyUsage.</li>
		<li><h3>MostraPolices</h3>Indica se, ao apresentar as informações dos certificados, será apresentada a aba que mostra as informações de Polices.</li>
		<li><h3>MostraDadosCRL</h3>Indica se, ao apresentar as informações dos certificados, será apresentada a aba que mostra as informações de CRLs.</li>
		<li><h3>MostraToString</h3>Indica se, ao apresentar as informações dos certificados, será apresentada a aba que mostra as informações de descrição do tipo toString do certificado.</li>
		<li><h3>MostraConteudo</h3>Indica se, ao apresentar as informações das assinaturas, será apresentada a aba que mostra o conteúdo da assinatura (possível apenas para assinaturas de formatos reconhecidos).</li>

		<!-- li><h3>ConteudoParaAssinar</h3>.</li>
		<li><h3>AssinaturaRemota</h3>.</li>
		<li><h3>SomenteVerificar</h3>.</li -->
	</ul>
	</p>
	<applet id='ICPBravoApplet'
		width='100%'
		height='800px'
		code='br.com.oaks.ICPBravo.applet.AppletICPBravo'
		codebase='../lib'
		archive='../lib/ICPBravoAPI-1.20.jar,../lib/commons-codec.jar,../lib/commons-httpclient.jar,../lib/commons-logging.jar,../lib/mail.jar'
		mayscript>
		<param name='TipoRepositorio' value='1'>
		<param name='AlgoritmosConsumo' value='SHA1'>
		<param name='FormaMostrarCertificados' value='0'>
		<param name='FormaMostrarArquivos' value='0'>
		<param name='FormaMostrarAssinaturas' value='0'>
	</applet>
	<script src='ICPBravo.js'></script>	
	<br>
	<p>O exemplo acima mostra o applet com a apresentação de sua interface de usuário.</p>
	<p>Podemos subdividir a tela do applet em basicamente cinco áreas relevantes.
<ul>
<li>A primeira, bem acima da tela do applet, é a área com o menu. São duas as opções deste menu:<ul>
	<li>Recarregar a lista de certificados - Útil para quando reconectamos novos dispositivos criptográficos ou smartcards.</li>
	<li>Configuração do ICP-Bravo - Abre uma janela de configuração que permite parametrizar o uso do applet, para o caso dos parâmetros que não são forçados em tempo de inicialização.</li>
</ul></li>
<li>A segunda região relevante do applet é a região que permite apresentar a lista de certificados encontrados e selecionar com qual certificado realizaremos as operações.
<br>Esta região pode ser apresentada de duas formas. Ou em forma de árvore (como o nosso exemplo acima), ou em forma de combobox, o que reduz muito o espaço necessário para apresentar o certificado, porém diminuido as informações apresentadas para o usuário. 
</li>
<li>A terceira região relevante é a região que apresenta o sistema de arquivos da estação do cliente.
<br>Assim como na apresentação do certificado, é possível parametrizar se deseja-se que esta área apareça com uma grande lista contendo a árvore de diretório/arquivos já na tela principal do applet, ou se deseja que esta janela apenas seja apresentada no caso de clicar-se em um botão.
<br>Cabe uma ressalva neste ítem. É possível também que o applet seja programado para assinar um conteúdo oriundo do servidor, onde neste caso não será apresentada esta região e sim um espaço para mostrar ao usuário o conteúdo que irá assinar.
</li>
<li>
A quarta região da tela do applet é a que apresenta ao usuário as possíveis ações que podem ser desempenhadas, como assinar, co-assinar, importar, exportar, apagar a assinatura, criptografar e decriptografar.
<br>A disponibilidade destes botões é em função da parametrização do applet e das condições operacionais no momento da ação.
</li>
<li>Por fim, a última região da tela é a que apresenta as informações da assinatura, que também podem ou não aparecer na tela do applet em função de como o applet está parametrizado.
</li>
</ul>
	</p>
</body>
</html>
