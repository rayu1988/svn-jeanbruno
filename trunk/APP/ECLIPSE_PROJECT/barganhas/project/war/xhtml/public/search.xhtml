<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	template="/xhtml/bases/base.xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:bargas="http://barganhas.com.br/barganhas">
	
	<ui:define name="bodyNavigation">
		<div id="searchNavigationBox">
			<div id="searchFilter">
			
				<!-- search text -->
				<h:panelGroup styleClass="innerSearchBox" layout="block"  rendered="#{siteBean.searchText ne null}">
					<p class="searchFilterHeader">
						<h:outputText value="#{msg.searchFilter}"/>
					</p>
					
					<h:panelGroup layout="block" styleClass="resultFoundSearchBox">
						<p>
							<h:outputText value="#{siteBean.searchText}"/>
						</p>
						<h:commandLink value="x" styleClass="excludeResultFoundSearchBox" action="#{siteBean.goToIndex}" onclick="popupLoading(true);"/>
					</h:panelGroup>
				</h:panelGroup>
				
				<!-- categories -->
				<div class="innerSearchBox">
					<p class="searchFilterHeader">
						<h:outputText value="#{msg.categories}"/>
					</p>
					
					<h:panelGroup layout="block" styleClass="resultFoundSearchBox" rendered="#{siteBean.categoryFilter ne null}">
						<p>
							<h:outputText value="#{siteBean.categoryFilter.name}"/>
						</p>
						<h:commandLink value="x" action="#{siteBean.search}" styleClass="excludeResultFoundSearchBox" onclick="popupLoading(true);">
							<f:setPropertyActionListener target="#{siteBean.categoryFilter}" value="#{null}"/>
						</h:commandLink>
					</h:panelGroup>
					
					<ul>
						<ui:repeat var="category" value="#{siteBean.listFilterCategory}">
							<li>
								<h:commandLink value="#{category.name}" action="#{siteBean.search}" onclick="popupLoading(true);">
									<f:setPropertyActionListener target="#{siteBean.categoryFilter}" value="#{category}"/>
								</h:commandLink>
							</li>
						</ui:repeat>
					</ul>
				</div>
				
				<!-- localization (states) -->
				<div class="innerSearchBox">
					<p class="searchFilterHeader">
						<h:outputText value="#{msg.localizationRegion}"/>
					</p>
					
					<h:panelGroup layout="block" styleClass="resultFoundSearchBox" rendered="#{siteBean.stateFilter ne null}">
						<p>
							<h:outputText value="#{siteBean.stateFilter.name}"/>
						</p>
						<h:commandLink value="x" action="#{siteBean.search}" styleClass="excludeResultFoundSearchBox" onclick="popupLoading(true);">
							<f:setPropertyActionListener target="#{siteBean.stateFilter}" value="#{null}"/>
						</h:commandLink>
					</h:panelGroup>
					
					<ul>
						<ui:repeat var="state" value="#{siteBean.listFilterState}">
							<li>
								<h:commandLink value="#{state.name}" action="#{siteBean.search}" onclick="popupLoading(true);">
									<f:setPropertyActionListener target="#{siteBean.stateFilter}" value="#{state}"/>
								</h:commandLink>
							</li>
						</ui:repeat>
					</ul>
				</div>
				
				<!-- range values -->
				<div class="innerSearchBox">
					<p class="searchFilterHeader">
						<h:outputText value="#{msg.rangeValues}"/>
					</p>
					
					<h:panelGrid columns="2">
						<h:outputLabel value="#{msg.msgFrom} #{msg.msgRealCurrency} " for="filterCurrencyFrom" style="font-size: 13px;"/>
						<bargas:inputCurrencyConverted id="filterCurrencyFrom" converterId="ConverterCurrencyReal"
							maxlength="12" value="#{siteBean.filterCurrencyFrom}" styleClass="currencyFilter" allowZero="false"/>
						
						<h:outputLabel value="#{msg.msgUpTo} #{msg.msgRealCurrency} " for="filterCurrencyUpTo" style="font-size: 13px;"/>
						<bargas:inputCurrencyConverted id="filterCurrencyUpTo" converterId="ConverterCurrencyReal"
							maxlength="12" value="#{siteBean.filterCurrencyUpTo}" styleClass="currencyFilter" allowZero="false"/>
						
						<h:column />
						<h:commandButton value="#{msg.msgFilterUp}" styleClass="customButton" action="#{siteBean.search}" immediate="false" onclick="popupLoading(true);"/>
					</h:panelGrid>
				</div>
			</div>
			
			<div id="productsList">
				<div class="filterGridOrList">
					<h:commandLink action="#{siteBean.search}" onclick="popupLoading(true);">
						<h:graphicImage value="#{request.contextPath}/images/list.png"/>
						<f:setPropertyActionListener target="#{siteBean.listAsGrid}" value="#{false}"/>
					</h:commandLink>
					<h:commandLink action="#{siteBean.search}" onclick="popupLoading(true);">
						<h:graphicImage value="#{request.contextPath}/images/grid.png"/>
						<f:setPropertyActionListener target="#{siteBean.listAsGrid}" value="#{true}"/>
					</h:commandLink>
				</div>
				
				<ul class="filterOrderBy">
					<li style="border: 0;"><h:outputText value="#{msg.searchOrdering}:"/></li>
					<li>
						<h:commandLink value="#{msg.searchOrderingMostRelevant}" action="#{siteBean.search}" rendered="#{siteBean.searchOrdering ne 'MOST_RELEVANT'}">
							<f:setPropertyActionListener target="#{siteBean.searchOrdering}" value="#{'MOST_RELEVANT'}"/>
						</h:commandLink>
						<h:outputText value="#{msg.searchOrderingMostRelevant}" rendered="#{siteBean.searchOrdering eq 'MOST_RELEVANT'}" style="font-weight: bold;"/>
					</li>
					<li>
						<h:commandLink value="#{msg.searchOrderingLowerPrice}" action="#{siteBean.search}" rendered="#{siteBean.searchOrdering ne 'LOWER_PRICE'}">
							<f:setPropertyActionListener target="#{siteBean.searchOrdering}" value="#{'LOWER_PRICE'}"/>
						</h:commandLink>
						<h:outputText value="#{msg.searchOrderingLowerPrice}" rendered="#{siteBean.searchOrdering eq 'LOWER_PRICE'}" style="font-weight: bold;"/>
					</li>
					<li style="border: 0;">
						<h:commandLink value="#{msg.searchOrderingHigherPrice}" action="#{siteBean.search}" rendered="#{siteBean.searchOrdering ne 'HIGHER_PRICE'}">
							<f:setPropertyActionListener target="#{siteBean.searchOrdering}" value="#{'HIGHER_PRICE'}"/>
						</h:commandLink>
						<h:outputText value="#{msg.searchOrderingHigherPrice}" rendered="#{siteBean.searchOrdering eq 'HIGHER_PRICE'}" style="font-weight: bold;"/>
					</li>
				</ul>
			
				<ul class="#{siteBean.listAsGrid ? 'unordenedSearchGalleryClearList' : 'unordenedSearchClearList'}" style="margin-left: 20px;">
					<ui:repeat value="#{siteBean.listResultSearch}" var="advertisement">
					
						<li style="#{siteBean.listAsGrid ? '' : 'position: relative;'}">
							
							<!-- image base -->
							<a href="#{request.contextPath}/xhtml/public/advertisementConsult.jsf?q=#{bargas:getStringFromKey(advertisement.key)}"
								class="#{siteBean.listAsGrid ? 'imagesSearchGrid' : 'imagesSearchList'}">
								
								<h:graphicImage value="/fileserver?q=#{bargas:getStringFromKey(advertisement.sheetPicture.keyThumbnail)}"/>
							</a>
							
							<!-- desc box -->
							<div class="#{siteBean.listAsGrid ? 'descGridSearchListBox' : 'descSearchListBox'}">
							
								<!-- title -->
								<a href="#{request.contextPath}/xhtml/public/advertisementConsult.jsf?q=#{bargas:getStringFromKey(advertisement.key)}"
									class="descProduct-itensInList">
									
									<h:outputText value="#{advertisement.title}"/>
								</a>
								
								<!-- description -->
								<p class="#{siteBean.listAsGrid ? 'furtherDescGrid' : 'furtherDescInLine'}">
									<h:outputText value="#{bargas:truncateString(advertisement.description, 200)}"/>
								</p>
							</div>
							
							<!-- price -->
							<p class="#{siteBean.listAsGrid ? 'priceBox' : 'searchListPriceBox'}">
								<a href="#{request.contextPath}/xhtml/public/advertisementConsult.jsf?q=#{bargas:getStringFromKey(advertisement.key)}">
									<h:outputText value="#{msg.msgRealCurrency} "/>
									<h:outputText value="#{advertisement.value}">
										<f:converter converterId="ConverterCurrencyReal"/>
									</h:outputText>
								</a>
							</p>
							
							<!-- list exchange by -->
							<p class="#{siteBean.listAsGrid ? '' : 'searchListExchangeBox'}">
								<h:outputText value="#{bargas:truncateString(advertisement.listExchangeBy, 35)}"/>
							</p>
						</li>
					</ui:repeat>
				</ul>
				
				<div style="padding: 10px; position: relative; text-align: center; clear: both;">
					<ul class="searchScroller">
						<li>1</li>
<!-- 						<li>2</li> -->
<!-- 						<li>3</li> -->
<!-- 						<li>4</li> -->
<!-- 						<li>5</li> -->
<!-- 						<li>6</li> -->
<!-- 						<li>7</li> -->
<!-- 						<li>8</li> -->
<!-- 						<li>9</li> -->
<!-- 						<li>10</li> -->
					</ul>
				</div>
			</div>
		</div>
		
		<t:saveState value="#{siteBean.listAsGrid}"/>
		<t:saveState value="#{siteBean.searchText}"/>
		<t:saveState value="#{siteBean.listFilterCategory}"/>
		<t:saveState value="#{siteBean.categoryFilter}"/>
		<t:saveState value="#{siteBean.listFilterState}"/>
		<t:saveState value="#{siteBean.stateFilter}"/>
		<t:saveState value="#{siteBean.filterCurrencyFrom}"/>
		<t:saveState value="#{siteBean.filterCurrencyUpTo}"/>
		<t:saveState value="#{siteBean.searchOrdering}"/>
	</ui:define>
</ui:composition>